#separator:;
#html:true
Â¿CuÃ¡l es el flujo general de pasos lÃ³gicos que suele seguir un <code>Dockerfile</code>?;<ol><li>Base OS/Runtime (<code>FROM</code>)</li><li>Instalar Dependencias (<code>RUN</code>)</li><li>Configurar Entorno (<code>COPY</code>, <code>WORKDIR</code>, <code>ENV</code>)</li><li>Definir Comando de EjecuciÃ³n (<code>CMD</code>/<code>ENTRYPOINT</code>)</li></ol><i>Nota: A menudo se empieza en el paso 2/3 usando imÃ¡genes base de lenguajes.</i>
Â¿Por quÃ© es fundamental <b>fijar la versiÃ³n</b> de la imagen base (<code>FROM imagen:tag</code> o <code>@sha256:...</code>)?;"[ğŸ”’ğŸ‘ï¸] Para asegurar <b>reproducibilidad</b> y <b>seguridad</b>. Evita roturas por cambios inesperados en la base y permite control sobre vulnerabilidades. El hash SHA256 da la mÃ¡xima garantÃ­a."
Â¿Por quÃ© elegir imÃ¡genes base <b>pequeÃ±as y seguras</b> (ej. <code>-slim</code>, <code>-alpine</code>, Chainguard)?;"[ğŸ”’ğŸï¸] Reducen el <b>tamaÃ±o final</b> de la imagen (mÃ¡s rÃ¡pidas de transferir) y la <b>superficie de ataque</b> (menos vulnerabilidades)."
Â¿CÃ³mo se <b>optimiza el cachÃ© de capas</b> de Docker al instalar dependencias para acelerar builds?;"[ğŸï¸ğŸ‘ï¸] Ordenando las instrucciones: 1Âº <code>COPY</code> archivos de definiciÃ³n de deps (<code>requirements.txt</code>, etc.). 2Âº <code>RUN</code> instalaciÃ³n de deps. 3Âº <code>COPY</code> resto del cÃ³digo. AsÃ­, la instalaciÃ³n de deps solo se rehace si cambian sus definiciones."
Â¿QuÃ© beneficio adicional aportan los <b>montajes de cachÃ© de Buildkit</b> (<code>RUN --mount=type=cache,...</code>)?;"[ğŸï¸] Aceleran aÃºn mÃ¡s la instalaciÃ³n de dependencias al reutilizar artefactos cacheados (paquetes descargados) de forma mÃ¡s granular, incluso si los archivos de definiciÃ³n cambian ligeramente."
Â¿Por quÃ© se recomienda combinar comandos relacionados en una sola instrucciÃ³n <code>RUN</code> (usando <code>&&</code>)?;"[ğŸï¸ğŸ‘ï¸] Reduce el nÃºmero de capas (puede mejorar ligeramente tamaÃ±o/velocidad) y mantiene la cohesiÃ³n lÃ³gica. Usar <i>heredocs</i> mejora la legibilidad de scripts largos."
Â¿CuÃ¡l es la principal razÃ³n para usar un <b>usuario no-root</b> (<code>USER nombre_usuario</code>) en un Dockerfile?;[ğŸ”’] Mejorar la <b>seguridad</b> aplicando el principio de mÃ­nimo privilegio y aÃ±adiendo una capa de defensa en profundidad.
Â¿Por quÃ© es importante instalar <b>solo dependencias de producciÃ³n</b> en la imagen final?;[ğŸ”’ğŸï¸ğŸ‘ï¸] Para reducir la <b>superficie de ataque</b>, disminuir el <b>tamaÃ±o</b> de la imagen y evitar software innecesario en producciÃ³n.
Â¿CÃ³mo deben manejarse la <b>informaciÃ³n sensible</b> (secretos, claves API) al construir imÃ¡genes Docker?;[ğŸ”’] <b>NUNCA</b> copiarlos directamente a la imagen. Usar mecanismos seguros como secretos de build (build secrets), variables de entorno pasadas en tiempo de ejecuciÃ³n o volÃºmenes/montajes.
Â¿CÃ³mo contribuyen <code>.dockerignore</code> y el uso especÃ­fico de <code>COPY</code> a una mejor imagen?;[ğŸ”’ğŸï¸ğŸ‘ï¸] <b><code>.dockerignore</code></b> evita enviar archivos innecesarios/sensibles al contexto. <b><code>COPY</code> especÃ­fico</b> (en lugar de <code>COPY . .</code>) asegura que solo se incluyan los archivos requeridos. Ambos mejoran seguridad, velocidad de build y claridad.
Â¿CuÃ¡l es el propÃ³sito de la instrucciÃ³n <b><code>WORKDIR /ruta/trabajo</code></b>?;[ğŸ‘ï¸] Define un directorio por defecto para las instrucciones siguientes (<code>RUN</code>, <code>COPY</code>, <code>CMD</code>...), mejorando la <b>claridad y organizaciÃ³n</b> del Dockerfile y del sistema de archivos de la imagen.
Â¿QuÃ© funciÃ³n cumple la instrucciÃ³n <b><code>EXPOSE puerto</code></b>?;[ğŸ‘ï¸] Es puramente <b>informativa/documental</b>. Indica a los usuarios quÃ© puerto(s) la aplicaciÃ³n dentro del contenedor <i>espera</i> usar. No publica el puerto (eso requiere <code>-p</code> en <code>docker run</code>).
Â¿Para quÃ© se utiliza la instrucciÃ³n <b><code>ENV CLAVE=valor</code></b> en un Dockerfile?;[ğŸ”’ğŸ‘ï¸] Para establecer <b>variables de entorno</b> persistentes dentro de la imagen. Ãštil para configurar el comportamiento del runtime o la aplicaciÃ³n (ej. <code>ENV NODE_ENV=production</code>).
Â¿CuÃ¡l es el principal beneficio de usar <b>Construcciones Multi-Etapa</b> (Multi-Stage Builds)?;[ğŸ”’ğŸï¸] Permiten crear imÃ¡genes finales <b>muy pequeÃ±as y seguras</b> al separar las etapas de construcciÃ³n/compilaciÃ³n (con sus herramientas y dependencias) de la etapa final de ejecuciÃ³n, copiando solo los artefactos necesarios.